# JOIN

1. 없어진 기록 찾기

   ```mysql
   # 1. SUBQUERY 사용
   SELECT ANIMAL_ID, NAME FROM ANIMAL_OUTS WHERE ANIMAL_ID NOT IN (SELECT ANIMAL_ID FROM ANIMAL_INS) 
   ORDER BY ANIMAL_ID, NAME
   
   # 2. LEFT JOIN 사용
   SELECT outs.ANIMAL_ID, outs.NAME FROM ANIMAL_OUTS outs LEFT JOIN ANIMAL_INS ins ON outs.ANILMAL_ID = ins.ANIMAL_ID
   WHERE ins.ANIMAL_ID IS NULL
   ORDER BY outs.ANIMAL_ID, outs.NAME
   ```

   - ORACLE

     ```sql
     SELECT ANIMAL_ID, NAME FROM ANIMAL_OUTS
     MINUS
     SELECT ANIMAL_ID, NAME FROM ANIMAL_INS
     ORDER BY ANIMAL_ID, NAME
     ```

     

2. 있었는데요 없었습니다.

   ```mysql
   SELECT INS.ANIMAL_ID, INS.NAME FROM ANIMAL_INS INS LEFT JOIN ANIMAL_OUTS OUTS ON INS.ANIMAL_ID = OUTS.ANIMAL_ID
   WHERE INS.DATETIME > OUTS.DATETIME
   ORDER BY INS.DATETIME
   ```

3. 오랜 기간 보호한 동물(1)

   ```mysql
   # 1. SUBQUERY 사용
   SELECT NAME, DATETIME FROM ANIMAL_INS
   WHERE ANIMAL_ID NOT IN (SELECT ANIMAL_ID FROM ANIMAL_OUTS) 
   ORDER BY DATETIME LIMIT 3
   
   # 2. LEFT JOIN 사용
   SELECT INS.NAME, INS.DATETIME FROM ANIMAL_INS INS LEFT JOIN ANIMAL_OUTS OUTS ON INS.ANIMAL_ID = OUTS.ANIMAL_ID
   WHERE OUTS.ANIMAL_ID IS NULL
   ORDER BY INS.DATETIME LIMIT 3
   ```

4. 보호소에서 중성화한 동물

   ```mysql
   SELECT INS.ANIMAL_ID, INS.ANIMAL_TYPE, INS.NAME FROM ANIMAL_INS INS JOIN ANIMAL_OUTS OUTS ON INS.ANIMAL_ID = OUTS.ANIMAL_ID WHERE INS.SEX_UPON_INTAKE LIKE '%INTACT%' AND OUTS.SEX_UPON_OUTCOME NOT LIKE '%INTACT%'
   ```

   